// Copyright (c) 2017, WNProject Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE.txt file.

// RUN: basic 10 -> 9
// RUN: basic 3 -> 7
Int basic(Int x) {
// CHECK: {{5basicE}}
// CHECK-NEXT: bool __wns_if_temp0 = false;
// CHECK-NEXT: {
// CHECK-NEXT: __wns_if_temp0 = (x == 3);
// CHECK-NEXT: }
if (x == 3) {
// CHECK-NEXT: if (__wns_if_temp0) {
return 7;
// CHECK-NEXT: return 7;
}
// CHECK-NEXT: }
return 9;
// CHECK-NEXT: return 9;
}

// RUN: ifelse 3 -> 7
// RUN: ifelse 4 -> 10
// RUN: ifelse 10 -> 10
Int ifelse(Int x) {
// CHECK: {{6ifelseE}}
// CHECK: if (__wns_if_temp1) {
  if (x == 3) {
// CHECK-NEXT: return 7;
      return 7;
// CHECK-NEXT: } else {
  } else {
// CHECK-NEXT: return 10;
      return 10;
// CHECK-NEXT: }
  }
// CHECK-NEXT: }
  return 9;
}

// RUN: nested 4 8 -> 9
// RUN: nested 4 3 -> 7
// RUN: nested 4 2 -> 7
// RUN: nested 8 9 -> 10
Int nested(Int x, Int y) {
// CHECK: {{6nestedE}}
    if (x == 4) {
// CHECK: __wns_if_temp3 = (x == 4);
// CHECK: if (__wns_if_temp3) {
        if (y > 3) {
// CHECK: __wns_if_temp2 = (y > 3);
// CHECK: if (__wns_if_temp2) {
// CHECK-NEXT: return 9;
            return 9;
        }
// CHECK-NEXT: }
// CHECK-NEXT: return 7;
        return 7;
// CHECK-NEXT: } else {
    } else {
// CHECK-NEXT: return 10;
        return 10;
    }
    return 9;
}

// RUN: if_else 4 3 -> 13
// RUN: if_else 4 4 -> 9
// RUN: if_else 5 2 -> 12
// RUN: if_else 5 5 -> 12
Int if_else(Int x, Int y) {
// CHECK: {{7if_elseE}}
// CHECK: bool __wns_if_temp4 = false;
// CHECK-NEXT: bool __wns_if_temp5 = true;
    if (x > 4) {
// CHECK: __wns_if_temp4 = (x > 4);
// CHRECK-NEXT: __wns_if_temp5 = false;
      return 12;
    } else if (y < 4) {
// CHECK: __wns_if_temp4 = __wns_if_temp5;
// CHECK-NEXT: if (__wns_if_temp4) {
// CHECK-NEXT: __wns_if_temp4 = (y < 4);
// CHECK: if (__wns_if_temp4) {
// CHECK-NEXT: __wns_if_temp5 = false;
// CHECK-NEXT: return 13;
            return 13;
    }
// CHECK: return 9;
    return 9;
}